document.addEventListener("DOMContentLoaded", function() {
	
	// Append section theme to parent div (automatically generated by Shopify at page render)
  	// Facilitates sibling targeting to fix spacing on adjacent same-theme sections
  	var sections = document.querySelectorAll('#site-main section[class*="theme--"]');
  	sections.forEach(function(section) {
    	var parentDiv = section.closest('.shopify-section');
      	var themeClass = Array.from(section.classList).find(cls => cls.startsWith('theme--')).replace('theme--', 'section-theme--');
      	if (themeClass) {
          	parentDiv.classList.add(themeClass);
      	}
  	});

	// Accordion Component
	const accordions = document.querySelectorAll(".accordion");

  const openAccordion = (item) => {
    const content = item.querySelector(".item__content");
    item.classList.add("state--active");
    content.style.maxHeight = content.scrollHeight + "px";
  };

  const closeAccordion = (item) => {
    const content = item.querySelector(".item__content");
    item.classList.remove("state--active");
    content.style.maxHeight = null;
  };

  accordions.forEach((accordion) => {
    const items = accordion.querySelectorAll(".item");

    items.forEach((item) => {
      const heading = item.querySelector(".item__heading");
      const content = item.querySelector(".item__content");

      heading.onclick = () => {
        if (item.classList.contains("state--active")) {
          closeAccordion(item);
        } else {
          items.forEach((otherItem) => {
            if (otherItem !== item) {
              closeAccordion(otherItem);
            }
          });
          openAccordion(item);
        }
      };
    });
  });

});