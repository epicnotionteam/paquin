{% comment %}
// Output Hero [Home] component
{% endcomment %}

{% comment %} Assign section data to vars {% endcomment %}
{% assign section_heading           = section.settings.heading %}
{% assign section_content           = section.settings.content %}
{% assign section_cta_primary       = section.settings.cta_primary %}
{% assign section_cta_primary_url   = section.settings.cta_primary_url %}
{% assign section_cta_secondary     = section.settings.cta_secondary %}
{% assign section_cta_secondary_url = section.settings.cta_secondary_url %}
{% assign section_image             = section.settings.image %}
{% assign section_blocks            = section.blocks %}

{% comment %} Output section {% endcomment %}
<section class="section--hero-home theme--dark wrap--container" style="background-image: url(' {{ section_image | img_url: 'master' }}')">
   <div class="section__grid wrap--max push--center">
       {% comment %} Container [Content] {% endcomment %}
       <div class="container--content">
           <div class="section__wrap--content">
               {% comment %} Heading {% endcomment %}
               {% if section_heading != blank %}
                   <h1 class="section__heading">{{ section_heading }}</h1>
               {% endif %}
               {% comment %} Content {% endcomment %}
               {% if section_content != blank %}
                   <div class="section__content">{{ section_content }}</div>
               {% endif %}
               {% comment %} CTAs {% endcomment %}
               <div class="container--cta">
                   {% if section_cta_primary != blank and section_cta_primary_url != blank %}
                       <a href="{{ section_cta_primary_url }}" class="section__cta--primary btn btn--primary">{{ section_cta_primary }}</a>
                   {% endif %}
                   {% if section_cta_secondary != blank and section_cta_secondary_url != blank %}
                       <a href="{{ section_cta_secondary_url }}" class="section__cta--secondary btn btn--secondary">{{ section_cta_secondary }}</a>
                   {% endif %}
               </div>
           </div>
       </div>
   </div>
   {% comment %} Trust Signals {% endcomment %}
   {% if section_blocks.size > 0 %}
        <div class="glide carousel--trust-signals" data-carousel>
            <div data-glide-el="track" class="glide__track">
                <ul class="glide__slides">
                   {% for block in section_blocks %}
                        <li class="glide__slide item">
                            <div class="trust-signal">
                                {% if block.settings.heading != blank %}
                                    <p class="trust-signal__heading">{{ block.settings.heading }}</p>
                                {% endif %}
                                {% if block.settings.content != blank %}
                                    <div class="trust-signal__content">{{ block.settings.content }}</div>
                                {% endif %}
                            </div>
                        </li>
                   {% endfor %}
                </ul>
           </div>
       </div>
   {% endif %}
</section>

{% comment %} Conditional carousel initialization {% endcomment %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.2.0/css/glide.core.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.2.0/css/glide.theme.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.2.0/glide.min.js" defer></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Assign carousel instance to var
        let carouselTrustSignals;
        // Initialize or destroy carousel based on window width
        function initializeCarousel() {
            if (window.innerWidth < 1024) {
                // Initialize carousel if window width is <1024px
                carouselTrustSignals = new Glide('.carousel--trust-signals', {
                    type: 'carousel',
                    autoplay: 3200,
                    perView: 1,
                    animationDuration: 800,
                    gap: 24,
                });
                // Mount carousel instance
                carouselTrustSignals.mount(); 
            } else {
                // Destroy carousel if window width is >1024px
                if (carouselTrustSignals) {
                    carouselTrustSignals.destroy();
                }
            }
        }
        // Call function initially
        initializeCarousel(); 
        // Event listener for window resize
        window.addEventListener('resize', function () {
            // Reinitialize or destroy carousel on window resize
            initializeCarousel();
        });
    });
</script>

{% schema %}
{
   "name": "Hero [Home]",
   "settings": [
       {
           "type": "text",
           "id": "heading",
           "label": "Heading",
           "default": "Heading"
       },
       {
           "type": "richtext",
           "id": "content",
           "label": "Content",
           "default": "<p>Content</p>"
       },
       {
           "type": "text",
           "id": "cta_primary",
           "label": "Primary CTA Text",
           "default": "Primary CTA"
       },
       {
           "type": "url",
           "id": "cta_primary_url",
           "label": "Primary CTA URL"
       },
       {
           "type": "text",
           "id": "cta_secondary",
           "label": "Secondary CTA Text",
           "default": "Secondary CTA"
       },
       {
           "type": "url",
           "id": "cta_secondary_url",
           "label": "Secondary CTA URL"
       },
       {
           "type": "image_picker",
           "id": "image",
           "label": "Image"
       }
   ],
   "blocks": [
       {
           "type": "trust_signal",
           "name": "Trust Signal",
           "settings": [
               {
                   "type": "text",
                   "id": "heading",
                   "label": "Heading",
                   "default": "Heading"
               },
               {
                   "type": "richtext",
                   "id": "content",
                   "label": "Content",
                   "default": "<p>Content</p>"
               }
           ]
       }
   ],
   "presets": [
       {
           "name": "Hero [Home]",
           "category": "Paquin"
       }
   ]
}
{% endschema %}