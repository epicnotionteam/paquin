{% comment %}
// Output Hero [Internal] component
{% endcomment %}

{% comment %} Assign section data to vars {% endcomment %}
{% assign section_heading   = section.settings.heading %}
{% assign section_link_text = section.settings.link_text %}
{% assign section_link_url  = section.settings.link_url %}

{% comment %} Output section {% endcomment %}
<section class="section--hero-internal theme--dark">
    {% comment %} Container [Content] {% endcomment %}
    <div class="container--content">
        <div class="section__wrap--content">
            <div class="section__wrap--content-internal">
                {% comment %} Heading {% endcomment %}
                {% if section_heading != blank %}
                    <h1 class="section__heading">{{ section_heading }}</h1>
                {% endif %}
                {% comment %} Link {% endcomment %}
                {% if section_link_text != blank and section_link_url != blank %}
                    <a href="{{ section_link_url }}" class="button--base">{{ section_link_text }}</a>
                {% endif %}
            </div>
            <div class="section__wrap--navigation-internal">
                <select id="navigation--jump-links">
                    <option value="">Select a section</option>
                    {% comment %} Options added dynamically via script below {% endcomment %}
                </select>
            </div>
        </div>
    </div>
    {% comment %} Image {% endcomment %}
    <div class="container--image" style="background-image: url('{{ section.settings.image | img_url: '1024x' }}');"></div>
</section>

{% comment %} Generate jump link options {% endcomment %}
<script>
    function createSectionAnchors() {
        const sections = document.querySelectorAll('.shopify-section > section');
        const select = document.getElementById('navigation--jump-links');
        sections.forEach(section => {
            const heading = section.querySelector('.section__heading--small');
            if (heading) {
                const option = document.createElement('option');
                const anchor = document.createElement('a');
                const sectionId = section.parentElement.id;
                anchor.href = `#${sectionId}`;
                anchor.textContent = heading.textContent;
                option.appendChild(anchor);
                select.appendChild(option);
            }
        });
        // Add event listener for the change event
        select.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            const selectedAnchor = selectedOption.querySelector('a');
            if (selectedAnchor) {
                const href = selectedAnchor.getAttribute('href');
                window.location.href = href;
            }
        });
    }
    // Call the function when the DOM is loaded
    document.addEventListener('DOMContentLoaded', createSectionAnchors);
</script>

{% schema %}
{
    "name": "Hero [Internal]",
    "settings": [
        {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Heading"
        },
        {
            "type": "text",
            "id": "link_text",
            "label": "Link Text",
            "default": "Link text",
            "info": "Leave empty if no link is required"
        },
        {
            "type": "url",
            "id": "link_url",
            "label": "Link URL"
        },
        {
            "type": "image_picker",
            "id": "image",
            "label": "Background Image"
        }
    ],
    "presets": [
        {
            "name": "Hero [Internal]",
            "category": "Paquin"
        }
    ]
}
{% endschema %}